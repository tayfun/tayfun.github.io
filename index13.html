<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="content-language" content="tr">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weblog | Tayfun Şen</title>
<link rel="icon" type="image/png" href="/favicon.png" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Ubuntu:700&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" media="screen" />
<link rel="stylesheet" href="/css/main.css?cache=20150102-01" media="screen" />
<link href="http://blog.tayfunsen.com/feeds/posts/default.atom" rel="alternate" title="Atom" type="application/atom+xml" />
</head>
<body class="homepage" >
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '482957368512369',
      xfbml      : true,
      version    : 'v2.2'
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
<div class="container">
  <header class="mainheader">
    <a href="/"><img class="logo img-circle" src="/images/initials.png"></a>
  </header>
  <div id="content">
<article>
    <div class="postheader">
        <a class="posttitle" href="2010/01/yeni-yla-giris.html">
            Yeni Yıla Giriş
        </a>
        <div class="postmetadata">
            <span>Written <time class="postdate" datetime="2010-01-01 00:00:00+01:00" pubdate title="on Fri 01 January 2010">on Fri 01 January 2010</time></span>
        </div>
    </div>
    <div class="postcontent">
        <p>Hiçbir zaman yeni yıla özel bir şekilde girmedim. Benim için özel bir gün yok; veya her günüm <span style="font-style:italic;">özel</span>. Doğum günlerinde veya başka günlerde insanlara fazladan iyi davranmaya inanmıyorum. Bence değer verdiği insanlara her zaman iyi davranmaya dikkat etmeli insan. Sevdiklerini telefonla aramalı, hal hatır sormalı en azından ve bir problemde yardım eli uzatmalı.<br /><br />Bununla birlikte bu son yılbaşı arkadaşların denk gelmesi ile birlikte daha da güzel geçti. Amatör grupları çok seviyorum, stüdyoda kaydedilen ve bana yapay gelen kayıtlardan çok daha zevkliler çünkü olayın içerisinde sen de yer alıyorsun. Duyduğun bir sesin nasıl çıktığını "yapılırken" görmek ve insanların buna tepkilerini izlemek çok güzel. Zaten ben bir "insan gözlemleyicisi"yim.<br /><br /><br /><a href="http://1.bp.blogspot.com/_AZvuJ9kmERM/Sz4XfJksmEI/AAAAAAAABYU/GTYvkNxurpg/s1600-h/P1015051_1.JPG"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 300px;" src="http://1.bp.blogspot.com/_AZvuJ9kmERM/Sz4XfJksmEI/AAAAAAAABYU/GTYvkNxurpg/s400/P1015051_1.JPG" border="0" alt=""id="BLOGGER_PHOTO_ID_5421796825313876034" /></a>Kohei-san yıllarca piyano dersi alıp bize bir parça çalmaman çok ayıp :P<br /><br /><a href="http://3.bp.blogspot.com/_AZvuJ9kmERM/Sz4XgDt2rGI/AAAAAAAABY0/kzfZM2aqrhY/s1600-h/P1015046_1.JPG"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 300px; height: 400px;" src="http://3.bp.blogspot.com/_AZvuJ9kmERM/Sz4XgDt2rGI/AAAAAAAABY0/kzfZM2aqrhY/s400/P1015046_1.JPG" border="0" alt=""id="BLOGGER_PHOTO_ID_5421796840921541730" /></a>Gitarda Reşit.<br /><br /><a href="http://4.bp.blogspot.com/_AZvuJ9kmERM/Sz4Xf9zkYRI/AAAAAAAABYs/b1pKadynEbw/s1600-h/P1015038_1.JPG"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 300px; height: 400px;" src="http://4.bp.blogspot.com/_AZvuJ9kmERM/Sz4Xf9zkYRI/AAAAAAAABYs/b1pKadynEbw/s400/P1015038_1.JPG" border="0" alt=""id="BLOGGER_PHOTO_ID_5421796839334895890" /></a><br /><br /><a href="http://4.bp.blogspot.com/_AZvuJ9kmERM/Sz4XfjCFm3I/AAAAAAAABYk/p8soONM2DsU/s1600-h/P1015033_1.JPG"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 300px;" src="http://4.bp.blogspot.com/_AZvuJ9kmERM/Sz4XfjCFm3I/AAAAAAAABYk/p8soONM2DsU/s400/P1015033_1.JPG" border="0" alt=""id="BLOGGER_PHOTO_ID_5421796832148036466" /></a><br /><br /><a href="http://1.bp.blogspot.com/_AZvuJ9kmERM/Sz4XfSSfErI/AAAAAAAABYc/DVGTi_wPAVg/s1600-h/P1015029_1.JPG"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 300px;" src="http://1.bp.blogspot.com/_AZvuJ9kmERM/Sz4XfSSfErI/AAAAAAAABYc/DVGTi_wPAVg/s400/P1015029_1.JPG" border="0" alt=""id="BLOGGER_PHOTO_ID_5421796827653411506" /></a>Ve Ferhat.<br /><br /><a href="http://2.bp.blogspot.com/_AZvuJ9kmERM/Sz4a8d2of9I/AAAAAAAABY8/JMkqxXx_Oos/s1600-h/P1015058_1.JPG"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 300px;" src="http://2.bp.blogspot.com/_AZvuJ9kmERM/Sz4a8d2of9I/AAAAAAAABY8/JMkqxXx_Oos/s400/P1015058_1.JPG" border="0" alt=""id="BLOGGER_PHOTO_ID_5421800627508903890" /></a>Fotoğraflarda ışık farkları yer aldığında parlak noktalar oluyor, bunun ismi İngilizce'de <a href="http://en.wikipedia.org/wiki/Lens_flare">flare</a>. Bazıları bunları beğenmeseler de bence fotoğrafı güzelleştiriyorlar.<br /><br /><a href="http://1.bp.blogspot.com/_AZvuJ9kmERM/Sz4a8pTemhI/AAAAAAAABZE/xe5MkOyuwSk/s1600-h/P1015068_1.JPG"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 300px; height: 400px;" src="http://1.bp.blogspot.com/_AZvuJ9kmERM/Sz4a8pTemhI/AAAAAAAABZE/xe5MkOyuwSk/s400/P1015068_1.JPG" border="0" alt=""id="BLOGGER_PHOTO_ID_5421800630582680082" /></a><br /><br /><a href="http://1.bp.blogspot.com/_AZvuJ9kmERM/Sz4a9LzIjiI/AAAAAAAABZM/0_PgeexNdnQ/s1600-h/P1015070_1.JPG"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 300px;" src="http://1.bp.blogspot.com/_AZvuJ9kmERM/Sz4a9LzIjiI/AAAAAAAABZM/0_PgeexNdnQ/s400/P1015070_1.JPG" border="0" alt=""id="BLOGGER_PHOTO_ID_5421800639842258466" /></a>Hiromi-san at the keyboard.<br /><br /><a href="http://4.bp.blogspot.com/_AZvuJ9kmERM/Sz4a9RT2GJI/AAAAAAAABZU/LOFMuX-NWBo/s1600-h/P1015079_1.JPG"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 300px;" src="http://4.bp.blogspot.com/_AZvuJ9kmERM/Sz4a9RT2GJI/AAAAAAAABZU/LOFMuX-NWBo/s400/P1015079_1.JPG" border="0" alt=""id="BLOGGER_PHOTO_ID_5421800641321638034" /></a><br /><br /><a href="http://2.bp.blogspot.com/_AZvuJ9kmERM/Sz4a9ZQ4uVI/AAAAAAAABZc/T2PKLiBTfs8/s1600-h/P1015081_1.JPG"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;width: 400px; height: 300px;" src="http://2.bp.blogspot.com/_AZvuJ9kmERM/Sz4a9ZQ4uVI/AAAAAAAABZc/T2PKLiBTfs8/s400/P1015081_1.JPG" border="0" alt=""id="BLOGGER_PHOTO_ID_5421800643456710994" /></a><br /><br />Kohei, Ferhat, Reşit, Can, Melike ve Hiromi'ye Teşekkürler.<br /><br />Not: 2. ve 3. fotoğrafları ben çekmemiş olabilirim :) Can bir ara makineyi elimden almıştı onun kareleri olabilir. Her durumda güzel fotoğraflar.</p>
    </div>
    <div class="separator"><div class="separator-ruler"></div><span class="glyphicon glyphicon-star"></span><div class="separator-ruler"></div></div>
</article>
<article>
    <div class="postheader">
        <a class="posttitle" href="2009/12/nice-and-ionice-for-resource-draining.html">
            nice and ionice for resource draining processes
        </a>
        <div class="postmetadata">
            <span>Written <time class="postdate" datetime="2009-12-24 00:00:00+01:00" pubdate title="on Thu 24 December 2009">on Thu 24 December 2009</time></span>
        </div>
    </div>
    <div class="postcontent">
        <p>We recently started using <a href="http://www.nongnu.org/duplicity/duplicity.1.html"><span style="font-weight:bold;">duplicity</span></a> for backups. Duplicity is a really nice backup utility which makes it a piece of cake to take full and <a href="http://en.wikipedia.org/wiki/Incremental_backup">incremental backups</a>. It uses rsync in the background but adds a whole lot of clever features as well. One can take full backups once a month and then go on to use incremental backups every night so that less resources are used. Duplicity also has many interfaces for the backup service, it can use ssh or ftp or even Amazon's S3 service to store the backups on the cloud.<br /><br />Having an easy way to restore from the backups is the other side of taking backups. With duplicity this is handled easily as well because you can say "get me this file/directory from 5 days ago". If something goes wrong you can easily restore the files and go on with your work with minimum downtime. Note that backups are not to be used in place of redundancy. In redundancy you can have more than one server doing the same stuff, having the same files but they will both suffer from a failure in the application. So for example, if one of your customers accidentally deletes his account then your redundant servers will not question the action and both will lose all the account info. When that happens you would want your backups to be there.<br /><br />One trouble with backups is that they are Disk/CPU intensive. This could cause problems because you will generally want to backup important stuff on live servers. There could be workarounds to this but not all the time. For example, if you want to backup your database and you are using database replication, then you can take backups from the slave and not from the live server. But for most other backup types you will not have this flexibility. What do you do with backup processes on live servers?<br /><br />Two system utilities that come on Linux are "<span style="font-weight:bold;">nice</span>" and "<span style="font-weight:bold;">ionice</span>". They allow you to fine tune the priority of your programs. Using these two commands you can lower priorities of programs so that they run only when the CPU or disk has less load. On a live server this could be vital.<br /><br />On my experiments I've found that I don't need encryption duplicity offers because backup server is also our own box and since backups are sent over ssh there's no possibility of eavesdropping. You can disable encryption with the --no-encryption option. The upside of this is that duplicity will not run gpg and use processing power which encryption needs. In the end the duplicity command I ended up using is similar to this:<br /><code><br />$ sudo ionice -c3 nice -n19 duplicity -v 4 --no-encryption backupdir scp://myuser@myserver.com//opt/backupdir <br /></code><br />"ionice" with -c3 makes it run only when there are no other processes asking for IO. For "nice", I've used the lowest priority of 19 to run the process. You can check out a running process's "ionice" priority value by using -p switch:<br /><code><br />$ ionice -pMYPID <br /></code><br />and its nice value by using the "renice" tool.<br /><br />I love the flexibility Linux offers to developers. Having these tools makes taking backups less of a hassle.</p>
    </div>
    <div class="separator"><div class="separator-ruler"></div><span class="glyphicon glyphicon-star"></span><div class="separator-ruler"></div></div>
</article>
<article>
    <div class="postheader">
        <a class="posttitle" href="2009/12/there-are-two-ways-to-design-system.html">
            There are two ways to design a system
        </a>
        <div class="postmetadata">
            <span>Written <time class="postdate" datetime="2009-12-20 00:00:00+01:00" pubdate title="on Sun 20 December 2009">on Sun 20 December 2009</time></span>
        </div>
    </div>
    <div class="postcontent">
        <blockquote>... One way is to make it so simple that there are <em>obviously no deficiencies</em> and the other way is to make it so complicated that there are <em>no obvious deficiencies</em>. The first method is far more difficult. It demands the same skill, devotion, insight, and even inspiration as the discovery of the simple physical laws which underlie the complex phenomena of nature. It also requires a <em>willingness to accept objectives</em> which are limited by physical, logical, and technological constraints, and to accept a <em>compromise</em> when conflicting objectives cannot be met. <em>No committee</em> will ever do this until it is too late.</blockquote>
<p>From Tony Hoare's Turing Award speech (emphasis mine).</p>
<p><br /></p>
    </div>
    <div class="separator"><div class="separator-ruler"></div><span class="glyphicon glyphicon-star"></span><div class="separator-ruler"></div></div>
</article>
<article>
    <div class="postheader">
        <a class="posttitle" href="2009/12/nagios-for-monitoring.html">
            Nagios for Monitoring
        </a>
        <div class="postmetadata">
            <span>Written <time class="postdate" datetime="2009-12-10 00:00:00+01:00" pubdate title="on Thu 10 December 2009">on Thu 10 December 2009</time></span>
        </div>
    </div>
    <div class="postcontent">
        <h2>Why is monitoring important?</h2>
<p>Monitoring the health of your web applications is of utmost importance because, well, measuring puts you on the map and it tells you how well you are doing. Measuring performance, finding about bottlenecks and getting notified of troubles as fast as possible is something every web developer craves about. In addition to this, by having data/statistics about your application you can quickly determine if a modification you have just made is good or bad. In web development -as in many other fields- there are no silver bullets. A cookbook solution which may as well work for 90% of web applications may not be suitable for your case. Your so-called performance improvement might not affect at all, or worse it might start a new set of problems. This is why you should have a weekly/monthly/yearly data for your web application where you can see the patterns and anomalies.
<br /><br /><br /><h2>Nagios (and others?)</h2></p>
<p>We needed a flexible web monitoring solution for <a href="http://www.JotForm.com">JotForm</a>. We had used several other commercial products before but they were never good enough. I knew about Nagios (and Ganglia along with it) from my work at METU Computer Center and had good thoughts about it. Nagios in the meantime have moved on to version 3.2 and got quite complicated. I wanted to use Tobi Oetiker's graphing toolbox (MRTG and RRDtool) with Nagios and have some graphics ready as well. This is because it is always much more easier to visualize data using graphics, finding patterns becomes a less cumbersome task. The trouble with this is that it is not easy to configure Nagios to generate and use these graphs.There are many <a href="http://exchange.nagios.org/directory/Addons/Graphing-and-Trending/">add-ons for Nagios for generating graphs and trend analysis</a>. Most of these are either really old or lacking documentation or both. I decided to check out other similar software which might make the experience a bit more pleasant. Surely enough there are many packages/programs that use Nagios and promise an easier solution. <a href="http://www.opsview.org/">Opsview</a> for example packages Nagios with a user interface developed with Catalyst Web Framework. There is also a Nagios fork called <a href="http://www.icinga.org/">Icinga</a> which has a really nice GUI developed using ExtJS (the grid view is noticed from ExtJS directly :)). Icinga seemed to be a good alternative to Nagios as well.
<br /><br /><br /><br /><br /><h2>Installing Nagios and pnp4nagios Add-on</h2></p>
<p>So why did I choose Nagios and not for example Opsview or Icinga? Well, I thought I didn't really delve into the complexity of Nagios and so I wouldn't really appreciate the simplicity behind these other tools. Also, I would like to be in charge of my software and since these other tools basically hide Nagios' complexity which I didn't like. It would have been a different story if there were a contender to Nagios that was written from scratch. I looked to the Debian repositories for Nagios but it was too old there (1.6 in repository whereas the current version is 3.2!). So, I downloaded Nagios and went to look for add-ons as well.I came across pnp4nagios add-on which is relatively new but actively maintained and used this add-on to enhance Nagios. I will now be describing my experiences involving the installation of Nagios 3.2 and pnp4nagios 0.6 on a Debian box. I think most of the instructions will fit into any other Linux distribution so I hope these will be helpful for others as well. I think I also will come back to these instructions whenever a need arises.Download Nagios core <b>and</b> the Plugins. To install Nagios you need a web server (of course!) and gd library if you also want various CGIs too. Repository name for the gd library on the Debians is libgd2-xpm-dev so go on and install it beforehand. Nagios documentation is hidden behind various pages on the website but you wont be experiencing much trouble if you go through <a href="http://nagios.sourceforge.net/docs/3_0/quickstart.html">quickstart installation guide</a>. I followed the <a href="http://nagios.sourceforge.net/docs/3_0/quickstart-fedora.html">Fedora guide</a> since there were no instructions specific to Debian that was up to date. Try to use the default locations as it will be handy for configuring add-ons later on.One problem I had with Nagios was with two CGIs called trends.cgi and statusmap.cgi. They didn't get to compile first time and I had to tinker around the configuration options and the Makefile to see what was going on. I'm not sure what else I did but I think I installed libjpeg-dev and libpng-dev that were not installed before. In the end I had them compiled and copied them to the sbin directory under nagios and they worked.One command that is really helpful is asking nagios to check the configuration file:<code>$ sudo /usr/local/nagios/bin/nagios -v /usr/local/nagios/etc/nagios.cfg</code>After the installation you can see what default settings can show you by going to the web interface. If you are looking for some nice graphs at this point you will be disappointed because there will be no graphs waiting for you. For that, you need to install add-ons and pnp4nagios seems to be one good solution for that. I installed <a href="http://docs.pnp4nagios.org/pnp-0.6/start">PNP 0.6 according to the nice documentation</a> provided which is really nice because documentation is what sucks for most open source products. I did the configuration and integrated the web front end with nagios. The configuration verification command that I presented for nagios earlier on has a PNP counterpart that is really useful. Like the nagios version, it checks the configuration files for errors and reports them to you. Very useful for catching that typo you made:<code>$ sudo /usr/local/pnp4nagios/libexec/verify_pnp_config.pl -m "sync"</code>After you install PNP, you need to restart the Nagios daemon:<code> $ sudo /etc/init.d/nagios restart </code>If everything went according to plan, you should have a working installation of Nagios along with some pretty nice graphs. Now go on to the <a href="http://nagios.sourceforge.net/docs/3_0/monitoring-linux.html">configuration part and start monitoring other servers</a>.</p>
<p><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></p>
    </div>
    <div class="separator"><div class="separator-ruler"></div><span class="glyphicon glyphicon-star"></span><div class="separator-ruler"></div></div>
</article>
<article>
    <div class="postheader">
        <a class="posttitle" href="2009/11/phpunit-and-cannot-redeclare-class.html">
            PHPUnit and "Cannot redeclare class Config" errors
        </a>
        <div class="postmetadata">
            <span>Written <time class="postdate" datetime="2009-11-11 00:00:00+01:00" pubdate title="on Wed 11 November 2009">on Wed 11 November 2009</time></span>
        </div>
    </div>
    <div class="postcontent">
        <p>I have lost sometime trying to solve these errors so I better document it here. So, if you are running phpunit but getting errors of the sort:<br /><code><br />PHP Fatal error:  Cannot redeclare class Config in /opt/local/lib/php/PEAR/Config.php on line 44<br />PHP Stack trace:<br />PHP   1. {main}() /opt/local/lib/php/bin/phpunit:0<br />PHP   2. PHPUnit_TextUI_Command::main() /opt/local/lib/php/bin/phpunit:52<br />...<br /></code><br />Then you can get rid of this error by simply deleting the Config.php file inside the PEAR directory. Config library inside PEAR directory is not up to date it seems, with many deprecation warnings also being shown. After you remove the Config.php file everything should be good to go.<br /><br />On an unrelated note, "php --ini" shows you the ini files used by php and "php --ri xdebug" for example shows you information about the xdebug module. These commands are indispensable if you are trying to troubleshoot your php problems.</p>
    </div>
    <div class="separator"><div class="separator-ruler"></div><span class="glyphicon glyphicon-star"></span><div class="separator-ruler"></div></div>
</article>


<script type="text/javascript">
    var disqus_shortname = 'tayfunsen';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
  </div><!-- content -->
  <div class="footer">
    &copy; <span id="footername">Tayfun Şen</span> 2015. No <span style="background-color:#ccc; padding: 0 3px"><span style="color:red">p</span><span style="color:green">i</span><span style="color:rgb(8, 8, 161)">x</span><span style="color:rgb(143, 6, 5)">e</span><span style="color:black">l</span><span style="color:#2FA5A7">s</span></span> were harmed in during the making of this website. Powered by <a href="https://github.com/getpelican/pelican">Pelican</a>.
  </div><!-- footer -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="/js/main.js"></script>
<script>
var sc_project=2353622;
var sc_invisible=1;
var sc_security="6d6208aa";
</script>
<script src="http://www.statcounter.com/counter/counter.js"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div><!-- wrapper -->
</body>
</html>