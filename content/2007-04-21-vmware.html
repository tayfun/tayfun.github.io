name: vmware
layout: post
title: Ubuntu 7.04 + VMware
time: 2007-04-21 10:20:00 +03:00
[Eğer genel derleyici uyarısı "expected declaration specifiers..." için buradaysanız ve vmware ile ilgilenmiyorsanız, sizi <a href="http://blog.tayfunsen.com/2007/10/expected-declaration-specifiers-or.html">şu sayfaya</a> alayım.]<br /><br />[ If you are here for the general compiler error of ""expected declaration specifiers..." and not about installing vmware on ubuntu, <a href="http://blog.tayfunsen.com/2007/10/expected-declaration-specifiers-or.html">click here</a> ]<br />[English follows.]<br /><br /><br />Ubuntu 7.04 çıktı, ben de güncelleme yöneticisine uyarak yükselteyim dedim. VMware yükseltme sonrası çalışmıyordu, tekrar kuruluma başladım. VMware'in vmmon adlı modulü hata verip derlenmedi. Hatamız tam olarak şöyle:<br /><code><br />Using 2.6.x kernel build system.<br />make: Entering directory `/tmp/vmware-config2/vmmon-only'<br />make -C /usr/src/linux-headers-2.6.20-15-386/include/.. SUBDIRS=$PWD SRCROOT=$PWD/. modules<br />make[1]: Entering directory `/usr/src/linux-headers-2.6.20-15-386'<br />  CC [M]  /tmp/vmware-config2/vmmon-only/linux/driver.o<br />In file included from /tmp/vmware-config2/vmmon-only/linux/driver.c:80:<br />/tmp/vmware-config2/vmmon-only/./include/compat_kernel.h:21: error: expected declaration specifiers or ‘...’ before ‘compat_exit’<br />/tmp/vmware-config2/vmmon-only/./include/compat_kernel.h:21: error: expected declaration specifiers or ‘...’ before ‘exit_code’<br />/tmp/vmware-config2/vmmon-only/./include/compat_kernel.h:21: warning: type defaults to ‘int’ in declaration of ‘_syscall1’<br />make[2]: *** [/tmp/vmware-config2/vmmon-only/linux/driver.o] Error 1<br />make[1]: *** [_module_/tmp/vmware-config2/vmmon-only] Error 2<br />make[1]: Leaving directory `/usr/src/linux-headers-2.6.20-15-386'<br />make: *** [vmmon.ko] Error 2<br />make: Leaving directory `/tmp/vmware-config2/vmmon-only'<br />Unable to build the vmmon module.<br /></code><br /><br />Derlenmesini sağlamak için vmmon modülündeki küçük bir hatayı temizlemek gerekiyor. Şöyle ki:<br /><br />VMware kaynak kodlarının olduğu klasöre ve vmmon modül dizinine gidiyoruz.<br /><code><br /># cd /usr/lib/vmware/modules/source<br /></code><br />Tar dosyasını açıyoruz:<br /><code><br /># tar xf vmmon.tar<br /></code><br />Daha sonra sorunlu bölümü değiştiriyoruz:<br /><code><br /># sudo gvim vmmon-only/include/compat_kernel.h<br /></code><br />21. Satırdaki <br /><code><br />static inline _syscall1(int, compat_exit, int, exit_code);<br /></code><br />bölümünü<br /><code><br />#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,19)<br />static inline _syscall1(int, compat_exit, int, exit_code);<br />#endif<br /></code><br />olarak değiştirdikten sonra vmmon.tar dosyamızı tekrar oluşturuyoruz<br /><code><br /># sudo tar cvf vmmon.tar vmmon-only/<br /># sudo rm -rf vmmon-only/<br /></code><br />ve<br /><code><br /># /usr/bin/vmware-config.pl<br /></code><br />komutu ile VMware kurulumunda kaldığımız yerden devam ediyoruz.<br /><br />--<br /><br />English:<br /><br />I recently upgraded to Ubuntu 7.04. I bumped into some problems with the VMware Server Console installation. The error I received when installing is during the vmmon installation. Error message is given above, in the Turkish part of my article. To fix the issue, simply find the vmmon source code directory (most probably /usr/lib/vmware/modules/source ) then add the above code to line 21. After that, simply re-tar the file and run vmware-config.pl to continue the installation. Just follow what I have done in the above article.<br /><br />Hope this helps someone.<br /><br />Cheers.
