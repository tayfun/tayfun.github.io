name: openmpi-problem-mpirun-doesnt-do
layout: post
title: OpenMPI problem: mpirun doesn't do anything
time: 2008-06-03 15:10:00 +03:00

I have been compiling and recompiling and recompiling OpenMPI from source all day because I couldn't successfully run the hello world program. mpirun would just sit there returning no errors of any sort and no output. It turns out that my iptables configuration was causing the problem. So, if you are experiencing similar problem, better check your firewall settings. To give a little more detail, <a href="http://www.open-mpi.org/community/lists/users/2006/02/0624.php">OpenMPI uses random ports to communicate</a> so you should open ports to other nodes you will be communicating with. For one node localhost testing environments, you should tell iptables to accept connections from the loopback interface.<br /><br />Oh, and other thing, while running you may encounter errors like:<br /><br /><code>[peanutbutter:21391] mca: base: component_find: unable to open vprotocol pessimist: /usr/local/lib/openmpi/mca_vprotocol_pessimist.so: undefined symbol: pml_v_output (ignored)<br />[peanutbutter:21392] mca: base: component_find: unable to open vprotocol pessimist: /usr/local/lib/openmpi/mca_vprotocol_pessimist.so: undefined symbol: pml_v_output (ignored)</code><br /><br />If you do, just apply the below patch, I think it has something to do with network protocol that has been changed.<br /><br /><code>--- opal/libltdl/ltdl.c.old     2008-03-07 13:47:39.000000000 +0100<br />+++ opal/libltdl/ltdl.c 2008-03-07 13:48:05.000000000 +0100<br />@@ -1096,7 +1096,7 @@<br />     lt_user_data loader_data;<br />     const char *filename;<br />{<br />-  lt_module   module   = dlopen (filename, LT_LAZY_OR_NOW);<br />+  lt_module   module   = dlopen (filename, RTLD_GLOBAL | LT_LAZY_OR_NOW);<br /><br />  if (!module)<br />    {<br /></code>
