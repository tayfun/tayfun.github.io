name: rails-gems
layout: post
title: Rails Gems
time: 2007-12-18 02:21:00 +02:00
Şu an çalıştığım bir projede rails kullanıyorum. Resim işleme için *nix'lerde ImageMagick programını kullanan bir kütüphaneyi kurmam gerekti. Gem yöneticisini kullanarak kütüphaneyi kurdum:<br /><br /><code>$ sudo gem install mini_magick<br />Successfully installed mini_magick-1.2.3<br />Installing ri documentation for mini_magick-1.2.3...<br />Installing RDoc documentation for mini_magick-1.2.3...</code><br /><br />Bundan sonra kütüphanenin doğru kurulu olup olmadığını denemek için ruby kabuğunu çalıştırdım ve kütüphaneyi eklemeye çalıştım:<br /><br /><code>$ irb<br />irb(main):001:0> require "mini_magick"<br />LoadError: no such file to load -- mini_magick<br />        from (irb):1:in `require'<br />        from (irb):1</code><br /><br />Anladığımız kadarıyla ruby kütüphaneleri bulamıyor. Hımm, nerede acaba bu kütüphane dosyaları?<br /><br /><code>$ sudo gem contents mini_magick<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/MIT-LICENSE<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/History.txt<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/Manifest.txt<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/README.txt<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/Rakefile<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/init.rb<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/lib/image_temp_file.rb<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/lib/mini_magick.rb<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/test/actually_a_gif.jpg<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/test/not_an_image.php<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/test/simple.gif<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/test/test_image_temp_file.rb<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/test/test_mini_magick_test.rb<br />/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/test/trogdor.jpg</code><br /><br />Tamam, yerini artık biliyoruz. Şimdi tekrar deneyelim:<br /><br /><code>irb(main):005:0> require '/usr/lib/ruby/gems/1.8/gems/mini_magick-1.2.3/lib/mini_magick.rb'<br />=> true</code><br /><br />Sorunun path'lerle ilgili olduğundan artık eminiz. Biraz araştırma yapıp <a href="http://rubygems.org/read/chapter/3#page70">RubyGems dökümantasyonunu</a> buluyoruz. Yazılanlar kısaca şöyle: RubyGems, sürüm sisteminden dolayı kurulan kütüphaneleri direk kütüphanelerin bulunduğu dizine değil de sürümüne göre ayrı dizinlere koyuyor. Bu yüzden ruby'ye özellikle nerede bulunduklarını söylemek gerekiyor. Bunu otomatik olarak rubygems kütüphanesi yapıyor, doğru sürümdeki kütüphaneleri ruby'ye anlatıyor. Bunu sağlamak için birkaç yol var, mesela bir tanesi rubygems kütüphanesini eklemek, bir ikincisi ve kolay olanı ise RUBYOPT çevre değişkenini tanımlamak:<br /><br /><code>$ export RUBYOPT=rubygems<br />$  irb<br />irb(main):001:0> require 'mini_magick'<br />=> true</code><br /><br />Artık kütüphaneyi kullanabiliriz.
